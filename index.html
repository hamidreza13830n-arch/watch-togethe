<!-- ğŸ„ REALISTIC CHRISTMAS LIGHTS (CSS Ø§Ø¶Ø§ÙÙ‡ Ú©Ù† Ø¯Ø§Ø®Ù„ <style> Ø§ØµÙ„ÛŒØª) -->
<style>
.light-wrapper{
position:relative;
width:100%;
height:38px;
flex-shrink:0;
overflow:hidden;
filter:drop-shadow(0 3px 3px rgba(0,0,0,.4));
}

.light-wire{
position:absolute;
top:8px;
left:0;
width:100%;
height:28px;
}

.light-wire svg{
width:100%;
height:100%;
}

.bulb{
position:absolute;
width:9px;
height:13px;
border-radius:50% 50% 45% 45%;
background:radial-gradient(circle at 30% 30%, #ffffff 0%, currentColor 45%, #00000022 100%);
box-shadow:
0 0 6px currentColor,
0 0 14px currentColor,
0 2px 4px rgba(0,0,0,.4);
animation:blink 1.6s infinite alternate ease-in-out;
}

.bulb::before{
content:"";
position:absolute;
top:-3px;
left:50%;
transform:translateX(-50%);
width:5px;
height:4px;
background:linear-gradient(#444,#111);
border-radius:2px;
box-shadow:0 1px 2px rgba(0,0,0,.6);
}

@keyframes blink{
0%{opacity:1;transform:scale(1);filter:brightness(1.1);}
100%{opacity:.65;transform:scale(.9);filter:brightness(.85);}
}

body.dark .light-wrapper{
opacity:0;
pointer-events:none;
}
</style>

<!-- ğŸ„ Ø§ÛŒÙ†Ùˆ Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ù‚Ø¨Ù„ Ø§Ø² <div class="main"> Ø¨Ø°Ø§Ø± -->

<div class="light-wrapper">
<div class="light-wire">
<svg viewBox="0 0 1000 100" preserveAspectRatio="none">
<path d="M0,25 Q100,55 200,25 T400,25 T600,25 T800,25 T1000,25"
stroke="#1a1a1a"
stroke-width="3"
fill="transparent"
style="filter: drop-shadow(0 2px 2px rgba(0,0,0,.6));"/>
</svg>
</div>
</div>

<!-- Ú©Ø¯ Ø®ÙˆØ¯Øª Ø¨Ø¯ÙˆÙ† Ø­Ø°Ù -->

<input id="videoLinkInput" placeholder="Ù„ÛŒÙ†Ú© ÙÛŒÙ„Ù…..." style="width:100%;padding:8px;border-radius:10px;border:none;margin-bottom:8px">
<button onclick="setVideoLink()">Ù¾Ø®Ø´ ÙÛŒÙ„Ù…</button>
<hr style="margin:15px 0;opacity:.3">
<button onclick="toggleDark()">Ø¯Ø§Ø±Ú© Ù…ÙˆØ¯</button>
<button onclick="clearChat()">Ø­Ø°Ù ØªØ§Ø±ÛŒØ®Ú†Ù‡</button>
<button onclick="toggleSettings()">Ø¨Ø³ØªÙ†</button>
</div>

<!-- ğŸ„ Ø§ÛŒÙ† Ø±ÛŒØ³Ù‡ Ø§ÛŒÙ†Ø¬Ø§Ø³Øª -->

<div class="light-wrapper">
<div class="light-wire">
<svg viewBox="0 0 1000 100" preserveAspectRatio="none">
<path d="M0,25 Q100,55 200,25 T400,25 T600,25 T800,25 T1000,25"
stroke="#1a1a1a"
stroke-width="3"
fill="transparent"
style="filter: drop-shadow(0 2px 2px rgba(0,0,0,.6));"/>
</svg>
</div>
</div>

<div class="main">
<div class="video-container glass">
<video id="video" controls></video>
</div>

<div class="chat-container glass">
<div class="chat-box" id="chat"></div>
<div class="input-area">
<input id="msg" placeholder="Ù¾ÛŒØ§Ù…...">
<button onclick="send()">Send</button>
</div>
</div>
</div>

<!-- ğŸ„ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³Ø§Ø®Øª Ù„Ø§Ù…Ù¾â€ŒÙ‡Ø§ (Ù‚Ø¨Ù„ Ø§Ø² firebase) -->

<script>
const colors=[
"#ff2d2d",
"#ffd400",
"#00ff88",
"#00aaff",
"#ff66ff",
"#ff8800"
];

const wrapper=document.querySelectorAll(".light-wrapper")[1];

for(let i=0;i<30;i++){
let bulb=document.createElement("div");
bulb.className="bulb";
bulb.style.left=(i*3.4)+"%";
bulb.style.top=(14+Math.sin(i)*4)+"px";
bulb.style.color=colors[Math.floor(Math.random()*colors.length)];
bulb.style.animationDelay=(Math.random()*2)+"s";
wrapper.appendChild(bulb);
}

setInterval(()=>{
document.querySelectorAll(".bulb").forEach(b=>{
b.style.color=colors[Math.floor(Math.random()*colors.length)];
});
},2500);
</script>

<!-- Ú©Ø¯ Firebase Ùˆ Ú†Øª Ø®ÙˆØ¯Øª Ø¨Ø¯ÙˆÙ† Ù‡ÛŒÚ† ØªØºÛŒÛŒØ±ÛŒ -->

<script>
var firebaseConfig={
apiKey:"AIzaSyCDHmmKIYPHDyvx4BXTb-7VP6lmVb8BCYw",
authDomain:"film-online-922c1.firebaseapp.com",
databaseURL:"https://film-online-922c1-default-rtdb.firebaseio.com/",
projectId:"film-online-922c1"
};
firebase.initializeApp(firebaseConfig);
var db=firebase.database();
var username="user"+Math.floor(Math.random()*1000);
var myId=Math.random().toString(36).substr(2,9);
var replyTo=null;

/* LOGIN */
function checkPass(){
if(pass.value==="bazsho20"){
login.style.display="none";
welcomeOverlay.style.display="flex";
}}
function closeWelcome(){welcomeOverlay.style.display="none"}

/* SETTINGS */
function toggleSettings(){settings.classList.toggle("open")}
function toggleDark(){document.body.classList.toggle("dark")}

/* VIDEO LINK */
function setVideoLink(){
var link=document.getElementById("videoLinkInput").value;
if(!link)return;
db.ref("video/url").set(link);
videoLinkInput.value="";
toggleSettings();
}
db.ref("video/url").on("value",snap=>{
if(snap.val())video.src=snap.val();
});

/* ONLINE */
db.ref("online/"+myId).set(true);
db.ref("online/"+myId).onDisconnect().remove();
db.ref("online").on("value",snap=>{
online.innerText="Online: "+snap.numChildren();
});

/* CHAT */
function send(){
if(!msg.value)return;
db.ref("chat").push({
text:msg.value,
user:username,
time:Date.now(),
reply:replyTo,
seen:false,
reactions:{}
});
msg.value="";
replyTo=null;
}

db.ref("chat").on("child_added",snap=>{
var d=snap.val();
var key=snap.key;
if(d.user!==username){
db.ref("chat/"+key+"/seen").set(true);
}
var div=document.createElement("div");
div.className="message "+(d.user===username?"me":"other");
div.id="m_"+key;

if(d.reply){
var rep=document.createElement("div");
rep.className="reply-box";
rep.innerText=d.reply;
div.appendChild(rep);
}

var text=document.createElement("div");
text.innerText=d.text;
div.appendChild(text);

var meta=document.createElement("div");
meta.className="meta";
meta.innerHTML=new Date(d.time).toLocaleTimeString().slice(0,5)
+(d.user===username?" <span id='s"+key+"'>âœ”</span>":"");
div.appendChild(meta);

var react=document.createElement("div");
react.className="reactions";
div.appendChild(react);

div.onclick=function(e){
e.stopPropagation();
showReactions(key,div);
replyTo=d.text;
};

chat.appendChild(div);
chat.scrollTop=chat.scrollHeight;

if(d.user===username){
db.ref("chat/"+key+"/seen").on("value",s=>{
document.getElementById("s"+key).innerText=s.val()?"âœ”âœ”":"âœ”";
});
}
});

function showReactions(key,div){
if(div.querySelector(".reaction-picker"))return;
var picker=document.createElement("div");
picker.className="reaction-picker";
["ğŸ˜","ğŸ˜","ğŸ¤£","â¤ï¸","ğŸ‘Œ"].forEach(e=>{
var span=document.createElement("span");
span.innerText=e;
span.onclick=function(ev){
ev.stopPropagation();
db.ref("chat/"+key+"/reactions/"+myId).set(e);
picker.remove();
};
picker.appendChild(span);
});
div.appendChild(picker);
}

db.ref("chat").on("child_changed",snap=>{
var d=snap.val();
var react=document.querySelector("#m_"+snap.key+" .reactions");
react.innerHTML="";
if(d.reactions){
Object.values(d.reactions).forEach(e=>{
react.innerHTML+=e+" ";
});
}
});

function clearChat(){
db.ref("chat").remove();
chat.innerHTML="";
}
</script>
