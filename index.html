<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Watch Together</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
body{
  margin:0;
  background:#0f0f0f;
  font-family:Arial;
  color:white;
  height:100vh;
  display:flex;
  flex-direction:column;
}

header{
  background:#111;
  padding:12px;
  text-align:center;
  font-weight:bold;
}

.main{
  flex:1;
  display:flex;
  flex-direction:column;
}

/* ğŸ¬ ÙÛŒÙ„Ù… Ø¨Ø²Ø±Ú¯â€ŒØªØ± */
.video-container{
  flex:1.3;
  background:black;
}

video{
  width:100%;
  height:100%;
  object-fit:contain;
}

/* ğŸ’¬ Ú†Øª Ú©ÙˆÚ†ÛŒÚ©â€ŒØªØ± */
.chat-container{
  flex:1;
  display:flex;
  flex-direction:column;
  padding:12px 15px 25px 15px; /* ÙØ§ØµÙ„Ù‡ Ø§Ø² Ù¾Ø§ÛŒÛŒÙ† */
}

.chat-box{
  flex:1;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:8px;
}

.message{
  max-width:75%;
  padding:10px 14px;
  border-radius:15px;
  font-size:14px;
}

.my-message{
  align-self:flex-end;
  background:#0088cc;
  border-bottom-right-radius:4px;
}

.other-message{
  align-self:flex-start;
  background:#262626;
  border-bottom-left-radius:4px;
}

.time{
  font-size:11px;
  opacity:0.7;
  margin-top:4px;
  text-align:right;
}

/* âœ¨ Ú©Ø§Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ú©Ù…ÛŒ Ø¨Ø§Ù„Ø§ØªØ± */
.input-area{
  display:flex;
  gap:8px;
  margin-top:10px;
  margin-bottom:10px;
}

input{
  flex:1;
  padding:10px;
  border-radius:20px;
  border:none;
  outline:none;
}

button{
  padding:10px 16px;
  border:none;
  border-radius:20px;
  background:#e50914;
  color:white;
}

/* Ø­Ø§Ù„Øª Ø§ÙÙ‚ÛŒ */
@media (orientation: landscape){
  .main{
    flex-direction:row;
  }
  .video-container{
    flex:1.4;
  }
  .chat-container{
    flex:1;
  }
}
</style>
</head>
<body>

<header>ğŸ¬ Ø¨Ø§ Ù‡Ù… ØªÙ…Ø§Ø´Ø§ Ú©Ù†ÛŒØ¯</header>

<div class="main">

<div class="video-container">
<video id="video" controls></video>
</div>

<div class="chat-container">

<div class="chat-box" id="chat"></div>

<div class="input-area">
<input id="username" placeholder="Name">
<input id="message" placeholder="Message">
<button onclick="sendMessage()">Send</button>
</div>

</div>

</div>

<script>
var firebaseConfig={
  apiKey:"AIzaSyCDHmmKIYPHDyvx4BXTb-7VP6lmVb8BCYw",
  authDomain:"film-online-922c1.firebaseapp.com",
  databaseURL:"https://film-online-922c1-default-rtdb.firebaseio.com/",
  projectId:"film-online-922c1"
};

firebase.initializeApp(firebaseConfig);
var db=firebase.database();

/* ğŸ§¹ Ù¾Ø§Ú© Ø´Ø¯Ù† Ú†Øª Ù‡Ù†Ú¯Ø§Ù… ÙˆØ±ÙˆØ¯ */
db.ref("chat").remove();

/* Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… */
function sendMessage(){
  var msg=document.getElementById("message").value;
  if(!msg) return;

  var name=document.getElementById("username").value||"Guest";

  var now=new Date();
  var time=now.getHours().toString().padStart(2,'0')+
           ":"+
           now.getMinutes().toString().padStart(2,'0');

  db.ref("chat").push({
    user:name,
    text:msg,
    time:time
  });

  document.getElementById("message").value="";
}

/* Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… */
db.ref("chat").on("child_added",snap=>{
  var data=snap.val();
  var currentUser=document.getElementById("username").value;

  var div=document.createElement("div");
  div.className="message "+
    (data.user===currentUser?"my-message":"other-message");

  div.innerHTML=`
    <div>${data.text}</div>
    <div class="time">${data.time}</div>
  `;

  var chat=document.getElementById("chat");
  chat.appendChild(div);
  chat.scrollTop=chat.scrollHeight;
});
</script>

</body>
</html>
