<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Watch Together</title>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<style>
:root{
  --card: rgba(20,20,24,.75);
  --border: rgba(255,255,255,.08);
}

body{
  margin:0;
  font-family:Arial;
  color:white;
  height:100vh;
  display:flex;
  flex-direction:column;
  overflow:hidden;
  background:#0b0b12;
  position:relative;
}

/* Canvas particles */
#particles{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  z-index:-2;
}

/* Ù†ÙˆØ±Ù‡Ø§ÛŒ Ú¯Ø±Ø§Ø¯ÛŒØ§Ù†ÛŒ Ù†Ø±Ù… */
body::before{
  content:"";
  position:fixed;
  inset:-50%;
  background:
    radial-gradient(circle at 20% 30%, rgba(229,9,20,.4), transparent 40%),
    radial-gradient(circle at 80% 20%, rgba(0,136,204,.35), transparent 40%),
    radial-gradient(circle at 60% 80%, rgba(168,85,247,.3), transparent 40%);
  animation: moveLights 18s infinite alternate ease-in-out;
  filter: blur(120px);
  z-index:-1;
}

@keyframes moveLights{
  0%{ transform: translate(-10%, -10%) scale(1); }
  100%{ transform: translate(10%, 10%) scale(1.1); }
}

header{
  background:rgba(10,10,12,.6);
  backdrop-filter:blur(10px);
  padding:12px;
  display:flex;
  justify-content:space-between;
  font-weight:bold;
  border-bottom:1px solid var(--border);
}

.main{flex:1;display:flex;flex-direction:column;gap:10px;padding:10px;}

.video-container{
  flex:1.6;
  background:var(--card);
  border-radius:16px;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:8px;
  backdrop-filter:blur(12px);
}

.link-bar{display:flex;gap:8px;}
.link-bar input{flex:1;padding:10px;border-radius:18px;border:none;}
.link-bar button{padding:10px 14px;border:none;border-radius:18px;background:#e50914;color:white;font-weight:bold;}

video{width:100%;height:100%;border-radius:14px;background:black;}

.speed-control{display:flex;justify-content:flex-end;}
.speed-control select{padding:6px 10px;border-radius:10px;border:none;}

.chat-container{
  flex:1;
  background:var(--card);
  border-radius:16px;
  padding:12px;
  display:flex;
  flex-direction:column;
  backdrop-filter:blur(12px);
}

.chat-box{flex:1;overflow-y:auto;display:flex;flex-direction:column;gap:8px;}

.message{
  max-width:80%;
  padding:10px 14px;
  border-radius:15px;
  font-size:14px;
  cursor:pointer;
  position:relative;
}

.my-message{align-self:flex-end;background:#0088cc;border-bottom-right-radius:4px;}
.other-message{align-self:flex-start;background:#262626;border-bottom-left-radius:4px;}

.meta{display:flex;justify-content:flex-end;gap:6px;font-size:11px;opacity:.7;margin-top:4px;}

.reply-preview{
  background:rgba(255,255,255,.1);
  padding:5px 8px;
  border-left:3px solid #e50914;
  border-radius:8px;
  font-size:12px;
  margin-bottom:5px;
}

.input-area{display:flex;gap:8px;margin-top:8px;}
.input-area input{flex:1;padding:10px;border-radius:20px;border:none;}
.input-area button{padding:10px 16px;border:none;border-radius:20px;background:#e50914;color:white;font-weight:bold;}

@media (orientation: landscape){
  .main{flex-direction:row;}
  .video-container{flex:1.7;}
  .chat-container{flex:1;}
}
</style>
</head>

<body>

<canvas id="particles"></canvas>

<header>
<span>ðŸŽ¬ Watch Together</span>
<span id="onlineCount">Online: 1</span>
</header>

<div class="main">

<div class="video-container">
<div class="link-bar">
<input id="movieLink" placeholder="Paste mp4 link...">
<button onclick="loadVideo()">Load</button>
</div>

<video id="video" controls></video>

<div class="speed-control">
<select onchange="changeSpeed(this.value)">
<option value="0.5">0.5x</option>
<option value="1" selected>1x</option>
<option value="1.5">1.5x</option>
<option value="2">2x</option>
</select>
</div>
</div>

<div class="chat-container">
<div class="chat-box" id="chat"></div>
<div id="replyBox"></div>
<div class="input-area">
<input id="message" placeholder="Message">
<button onclick="sendMessage()">Send</button>
</div>
</div>

</div>

<script>
// ðŸŽ‡ Particles Effect
const canvas=document.getElementById("particles");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let particles=[];
for(let i=0;i<60;i++){
particles.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
r:Math.random()*2+1,
dx:(Math.random()-.5)*.3,
dy:(Math.random()-.5)*.3
});
}

function animate(){
ctx.clearRect(0,0,canvas.width,canvas.height);
particles.forEach(p=>{
ctx.beginPath();
ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
ctx.fillStyle="rgba(255,255,255,0.5)";
ctx.fill();
p.x+=p.dx;
p.y+=p.dy;
if(p.x<0||p.x>canvas.width)p.dx*=-1;
if(p.y<0||p.y>canvas.height)p.dy*=-1;
});
requestAnimationFrame(animate);
}
animate();

window.onresize=()=>{
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
};
</script>

</body>
</html>
